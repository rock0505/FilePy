# Claude Code 开发记忆文件

## 项目概述
开发一个轻量级文件服务器，使用Python + FastAPI + SQLite技术栈，提供完整的文件管理、权限控制、安全加密等功能。

## 技术要求
- Python 3.8
- FastAPI 后端框架
- SQLite 数据库
- 跨平台支持 (Windows/Linux)
- 默认端口: 1966

## 核心功能模块

### 1. 文件存储与管理
- 集中化文件存储
- CRUD操作支持
- 目录结构管理

### 2. 文件共享与访问
- HTTP文件管理接口
- 网络访问支持
- 多客户端并发访问

### 3. 权限与访问控制
- 用户/组权限管理
- ACL访问控制列表
- 读写执行权限控制
- 文件上传大小限制
- 身份认证系统

### 4. 数据安全与加密
- TLS/SSL传输加密
- 静态数据加密支持
- 审计日志记录

### 5. 性能优化
- 文件压缩
- 数据去重

### 6. 远程访问与同步
- 互联网远程访问
- 文件同步机制

### 7. 配额管理
- 磁盘使用监控
- 预警机制

### 8. 日志与监控
- 操作日志记录
- 系统监控集成

### 9. Web界面
- 资源管理器风格界面
- 文件目录浏览
- 文件搜索功能

## 实现要点

### 数据库设计
- 用户表 (users)
- 组表 (groups)  
- 权限表 (permissions)
- 文件表 (files)
- 日志表 (logs)
- 配置表 (config)

### 安全机制
- JWT身份认证
- HTTPS支持
- 访问日志审计
- 输入验证防护

### 性能优化
- 数据库索引优化
- 文件缓存机制
- 异步处理支持

### 部署考虑
- 单文件运行 (filepy.py)
- 配置文件支持
- 跨平台兼容性
- 服务监控集成

## 开发注意事项
1. 确保所有功能集成在单一filepy.py文件中
2. 使用标准库和轻量级第三方库
3. 提供完整的错误处理和日志记录
4. 实现RESTful API设计
5. 包含Web前端界面
6. 支持配置化部署

## 验收标准
- 单文件可执行
- 跨平台运行正常
- 功能完整性和稳定性
- 安全性符合要求
- 性能满足基本需求